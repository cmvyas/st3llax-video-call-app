(this["webpackJsonpvideo-call-client"]=this["webpackJsonpvideo-call-client"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},143:function(e,t){},145:function(e,t){},163:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(9),i=n.n(c),r=(n(103),n(19)),l=(n(104),n(203)),o=n(198),s=n(196),d=n(164),j=n(193),u=n(20),b=n(85),m=n(57),O=n.n(m),x=n(4),p=Object(a.createContext)(),f=Object(b.io)("https://git.heroku.com/st3llaxvideocall.git"),h=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(u.a)(n,2),i=c[0],r=c[1],l=Object(a.useState)(!1),o=Object(u.a)(l,2),s=o[0],d=o[1],j=Object(a.useState)(),b=Object(u.a)(j,2),m=b[0],h=b[1],g=Object(a.useState)(""),v=Object(u.a)(g,2),C=v[0],w=v[1],y=Object(a.useState)({}),N=Object(u.a)(y,2),k=N[0],I=N[1],S=Object(a.useState)(""),D=Object(u.a)(S,2),B=D[0],A=D[1],E=Object(a.useRef)(),U=Object(a.useRef)(),F=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){h(e),E.current.srcObject=e})),f.on("me",(function(e){return A(e)})),f.on("callUser",(function(e){var t=e.from,n=e.name,a=e.signal;I({isReceivingCall:!0,from:t,name:n,signal:a})}))}),[]);return Object(x.jsx)(p.Provider,{value:{call:k,callAccepted:i,myVideo:E,userVideo:U,stream:m,name:C,setName:w,callEnded:s,me:B,callUser:function(e){var t=new O.a({initiator:!0,trickle:!1,stream:m});t.on("signal",(function(t){f.emit("callUser",{userToCall:e,signalData:t,from:B,name:C})})),t.on("stream",(function(e){U.current.srcObject=e})),f.on("callAccepted",(function(e){r(!0),t.signal(e)})),F.current=t},leaveCall:function(){d(!0),F.current.destroy(),window.location.reload()},answerCall:function(){r(!0);var e=new O.a({initiator:!1,trickle:!1,stream:m});e.on("signal",(function(e){f.emit("answerCall",{signal:e,to:k.from})})),e.on("stream",(function(e){U.current.srcObject=e})),e.signal(k.signal),F.current=e}},children:t})},g=Object(j.a)((function(e){return{video:Object(r.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(r.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",color:"#590995",filter:"contrast(120%)",BackgroundColor:"white"}}})),v=function(){var e=g(),t=Object(a.useContext)(p),n=t.name,c=t.callAccepted,i=t.myVideo,r=t.userVideo,l=t.callEnded,j=t.stream,u=t.call;return Object(x.jsxs)(s.a,{container:!0,className:e.gridContainer,children:[j&&Object(x.jsx)(d.a,{className:e.paper,children:Object(x.jsxs)(s.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:n||"You"}),Object(x.jsx)("video",{playsInline:!0,muted:!0,ref:i,autoPlay:!0,className:e.video})]})}),c&&!l&&Object(x.jsx)(d.a,{className:e.paper,children:Object(x.jsxs)(s.a,{item:!0,xs:12,md:6,children:[Object(x.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:u.name||"Name"}),Object(x.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:e.video})]})})]})},C=n(205),w=function(){var e=Object(a.useContext)(p),t=e.answerCall,n=e.call,c=e.callAccepted;return Object(x.jsx)(x.Fragment,{children:n.isReceivingCall&&!c&&Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(x.jsxs)("h1",{children:[n.name," is calling..."]}),Object(x.jsx)(C.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},y=n(199),N=n(204),k=n(91),I=n(200),S=n(201),D=n(202),B=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px"}}})),A=function(e){var t=e.children,n=Object(a.useContext)(p),c=n.me,i=n.callAccepted,r=n.name,l=n.setName,j=n.callEnded,b=n.leaveCall,m=n.callUser,O=Object(a.useState)(""),f=Object(u.a)(O,2),h=f[0],g=f[1],v=B();return Object(x.jsx)(y.a,{className:v.container,children:Object(x.jsxs)(d.a,{elevation:10,className:v.paper,children:[Object(x.jsx)("form",{className:v.root,noValidate:!0,autoComplete:"off",children:Object(x.jsxs)(s.a,{container:!0,className:v.gridContainer,children:[Object(x.jsxs)(s.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(x.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(x.jsx)(N.a,{label:"Name",value:r,onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(x.jsx)(k.CopyToClipboard,{text:c,className:v.margin,children:Object(x.jsx)(C.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(x.jsx)(I.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(x.jsxs)(s.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(x.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(x.jsx)(N.a,{label:"ID to call",value:h,onChange:function(e){return g(e.target.value)},fullWidth:!0}),i&&!j?Object(x.jsx)(C.a,{variant:"contained",color:"secondary",startIcon:Object(x.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:b,className:v.margin,children:"Hang Up"}):Object(x.jsx)(C.a,{variant:"contained",color:"primary",startIcon:Object(x.jsx)(D.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return m(h)},className:v.margin,children:"Call"})]})]})}),t]})})},E=Object(j.a)((function(e){var t;return{appBar:(t={margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"520px",border:"transparent",color:"#001E6C",backgroundColor:"transparent"},Object(r.a)(t,e.breakpoints.down("xs"),{width:"80%"}),Object(r.a)(t,"fontSize","100px"),t),wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),U=function(){var e=E();return Object(x.jsxs)("div",{className:e.wrapper,children:[Object(x.jsx)(l.a,{className:e.appBar,position:"static",children:Object(x.jsx)(o.a,{align:"center",children:"Call Your Loved One's"})}),Object(x.jsx)(v,{}),Object(x.jsx)(A,{children:Object(x.jsx)(w,{})})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};i.a.render(Object(x.jsx)(h,{children:Object(x.jsx)(U,{})}),document.getElementById("root")),F()}},[[163,1,2]]]);
//# sourceMappingURL=main.4faea8e3.chunk.js.map